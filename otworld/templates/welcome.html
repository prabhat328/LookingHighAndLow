<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>High and Low</title>
<!-- {% load static %} -->
<link rel="icon" type="image/x-icon" href="logo.png">
<link rel="stylesheet" href="style.css">
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.4/html5-qrcode.min.js" integrity="sha512-k/KAe4Yff9EUdYI5/IAHlwUswqeipP+Cp5qnrsUjTPCgl51La2/JhyyjNciztD7mWNKLSXci48m7cctATKfLlQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<div class="container" ">
    <div class="qr-container">
        <div class="qr-scan">
            <div id="aft_scn"></div>
            <div id="reader"></div>
        </div>
    </div>

    <form method="post">
        <!-- {% csrf_token %} -->
        <!-- {% comment %}  -->
        <label for="pcode">
        </label>
        <input type="text" placeholder="Location Code" name="pno" required autocomplete="off"><br><br>
        <!-- {% endcomment %} -->
        <input type="hidden" id="result" name="loc_id" autocomplete="off">
        <label for="CC Code"></label>
        <input type="text" placeholder="Contingent Code" name="cc" required autocomplete="off"><br><br>

        <label id="prev_loc_lb" for="last"></label>
        <input type="text" placeholder="Last Loctaion" id="prev_loc" name="prev_loc" required autocomplete="off"><br><br>
        
        <button type="submit" id="btn">Submit!</button>
    </form>
</div>

<!-- This script display the scanner -->

<script>
const scanner = new Html5QrcodeScanner('reader', {
    qrbox: {
    width: 200,
    height: 200,
    },
    fps: 20,
});

scanner.render(success, error);
let loc = " ";
let res = " ";
function success(result) {
    document.getElementById('result').value = result;
    scanner.clear();
    res = document.getElementById('result').value;
    document.getElementById('reader').remove();
    aft_qr();
};

function error(err) {
    console.error(err);
}

document.getElementById('reader__dashboard_section').classList.add('scanner_dashboard');
</script>



<script type="text/javascript" src="/static/js/loc.js"></script>
</body>
</html>